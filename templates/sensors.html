<html lang="pt-br">
  <meta charset="utf-8">
  <title>IoTerm</title>
  <meta http-equiv="refresh" content="120">
  <meta name="description" content="Termohigrometro - IoT">
  <meta name="author" content="Cleiton Ferreira">
  <!-- Mobile Specific Metas ––––––––––––––––––––––––––––––––––––– -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- FONT ––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link href="//fonts.googleapis.com/css?family=Raleway:400,300,600" rel="stylesheet" type="text/css">
  <!-- CSS –––––––––––––––––––––––––––––––––––––––––– -->
  <link rel="stylesheet" href="/static/css/normalize.css">
  <link rel="stylesheet" href="/static/css/skeleton.css">
  <!-- Favicon ––––––––––––––––––––––––––––––––––––––––––––– -->
  <link rel="icon" type="image/png" href="/static/images/favicon.png">
  <!--charts ------>
  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
  <script type="text/javascript">
      google.charts.load('current', {'packages':['bar']});
      google.charts.setOnLoadCallback(drawStuff);

      function drawStuff() {
        var data = new google.visualization.arrayToDataTable([
          ['Sensores', 'Temperatura', 'Umidade'],
          ['RP01', {{temp[0]}}, {{hum[0]}}],
          ['RP02', {{temp[1]}}, {{hum[1]}}],
         ]);

        var options = {
          width: 800,
          chart: {
            title: 'IoTerm',
            subtitle: 'Temperatura e umidade em tempo real'
          },
          bars: 'horizontal', // Required for Material Bar Charts.
          series: {
            0: { axis: 'temperatura' }, // Bind series 0 to an axis named 'distance'.
            1: { axis: 'umidade' } // Bind series 1 to an axis named 'brightness'.
          },
          axes: {
            x: {
              umidade: {label: '%ur'}, // Bottom x-axis.
              temperatura: {side: 'top', label: '°C'} // Top x-axis.
            }
          }
        };

      var chart = new google.charts.Bar(document.getElementById('chart_temps'));
      chart.draw(data, options);
      }
  </script>
  </head>
  <body>
    <div class="container">
      <div class="row" style="margin-top: 5%">
		<div id="chart_temps" style="width: 100%; height: 50%;"></div>
	  </div>
	  <div class="row" style="margin-top: 5%">
        
			<table class="u-full-width">
			  <thead>
				<tr>
				  <th>Sensor</th>
				  <th>Temperatura</th>
          <th>Umidade</th>
				  <th>Data/Hora</th>
          <th><span>Settings</span></th>
				</tr>
			  </thead>
			  <tbody>
				<tr id='RP01'>
				  <td><a href="/hist/rp01">RP01</a></td>
				  <td>{{"{0:0.1f}".format(temp[0])}}</td>
				  <td>{{"{0:0.1f}".format(hum[0])}}</td>
				  <td>{{str_time[0]}}</td>
 				  <td><a href="/conf/rp01"><img src=static/images/settings.png width="20px" height="20px"></a></td>
				</tr>
				<tr id='RP02'>
				  <td><a href="/hist/rp02">RP02</a></td>
				  <td>{{"{0:0.1f}".format(temp[1])}}</td>
				  <td>{{"{0:0.1f}".format(hum[1])}}</td>
				  <td>{{str_time[1]}}</td>
          <td><a href="/conf/rp02"><img src=static/images/settings.png width="20px" height="20px"></a></td>
				</tr>
			  </tbody>
			</table>	
			
			<p>Refresh a cada 1 minuto  -  <a href="/logout">Logout</a></p>
				
      </div>
    </div>
  <input type="hidden" id="par_temp_min" name="par_temp_min"  value={{tmin}}/>
  <input type="hidden" id="par_temp_max" name="par_temp_max"  value={{tmax}}/>
</body> 
	<!-- Alerta de sensor fora dos parametros -->
	<script type="text/javascript" src="static/javascript/alerta_sensor.js"></script>
</html>
